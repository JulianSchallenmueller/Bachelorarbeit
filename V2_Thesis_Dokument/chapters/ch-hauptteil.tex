% Bsp. eines Hauptteils

\chapter{Grundlagen}
\label{sec:grundl}

\section[Funktionsprinzip, Vorteile und Herausforderungen]{Funktionsprinzip, Vorteile und Herausforderungen des modernen Cloud Computings}

Um die Rolle von Infrastructure as Code und Terraform vollständig erläutern zu können sollte zuerst das grundlegende Funktionsprinzip und die verschiedenen Service- und Bereitstellungs-Modelle moderner Cloud Plattformen erklärt werden. Die am meisten verwendete Definition von Cloud Computing wurde vom National Institute of Standards and Technology der Vereinigten Staaten von Amerika veröffentlicht und wird im folgenden Kapitel zusammengefasst.

\subsection{Definition und Funktionsweise}

Das National Institute of Standards and Technology (NIST) der VereinigtenStaaten von Amerika definiert Cloud Computing im Abstract der NIST SP-800-145\cite{def-cloud}folgendermaßen:\\

\enquote{Cloud computing is a model for enabling ubiquitous, convenient, on-demand network access to a sharedpool of configurable computing resources (e.g., networks, servers, storage, applications, and services) thatcan be rapidly provisioned and released with minimal management effort or service provider interaction.This cloud model is composed of five essential characteristics, three service models, and four deploymentmodels.}\\

Cloud Computing beschreibt ein Modell das es ermöglicht ortsunabhängig, zweckdienlich und zeitunabhängig auf einen konfigurierbaren Pool an Computing Ressourcen (Netzwerke, Server, Datenspeicher, Anwendungen und Services) zuzugreifen die schnell und mit minimalemAufwand und minimaler notwendiger Interaktion bereitgestellt und wieder abgebaut werden können.Dieses Cloud Modell beschreibt fünf essentielle Charakteristiken, drei Servicemodelleund vier Bereitstellungsmodelle.\\

Weiter definiert das Dokument die fünf Charakteristiken in den folgenden Punkten:

\textbf{On-demand-self-service}: Der Nutzer kann eigenmächtig die benötigten Computing Ressourcen automatisch bereitstellen, es wird keine menschliche Interaktion benötigt.

\textbf{Broad network access}: Auf Leistungen wird über das normale Internet mit standardmäßigenMechanismen wie der Nutzung von Thin Clients und Fat Clients (Smartphones, Tablets,Laptops oder Workstations) zugegriffen.

\textbf{Resource Pooling}: Die Computing Ressourcen des Anbieters werden in einem gemeinsamen Poolfür mehrere Kunden in einem Multi-Tenancy-fähigen Modell bereitgestellt, physische und virtuelle Ressourcen werden dynamisch zugewiesen und entsprechend der Nachfragekontinuierlich neu verteilt. Es wird eine empfundene Ortsunabhängigkeit hergestellt indem der Nutzer
kein genaues Wissen darüber besitzt wo sich dessen Ressourcen befinden, auf höherem Level wie beispielsweise dem Staat, der Region oder auch Rechenzentrum kannder Ort vom Nutzer spezifiziert werden. Die bereitgestellten Ressourcen beinhaltenzum Beispiel Datenspeicher, Rechenleistung, Arbeitsspeicher und Netzwerkbandbreite.

\textbf{Rapid Elasticity}: Rechenkapazitäten werden dehnbar bereitgestellt und abgebaut, teilweise automatisch, um entsprechend der Nachfrage schnell hoch- und wiederzurück skalieren zu können. Rechenkapazitäten erscheinen dadurch unbegrenzt und könnenzu jeder Zeit und in jedem Umfang bereitgestellt werden.

\textbf{Measured Service}: Cloud Systeme kontrollieren und optimieren Ressourcennutzung automatisch mithilfe eines Mess-Systems dass auf einer abstrakten Ebene denentsprechenden Service (Datenspeicher, Rechenleistung, Benutzerkonten, etc.) überwacht,kontrolliert und Bericht erstattet um sowohl für Anbieter als auch Kunden Transparenzherzustellen.\\

Es wird zwischen drei grundlegende Cloud Service Modellen unterschieden: Infrastructureas a Service (IaaS), Platform as a Service (PaaS) und Software as a Service (SaaS) (Abb. 2.1).

\begin{figure}[H]
	\includegraphics[width=1.0\textwidth]{fig/aa-hauptteil/Service-Models.png}
	\caption{Die Cloud Service Modelle im Überblick\cite{svc-mod}}
	\centering
\end{figure}

\textbf{Infrastructure as a Service:} Der Nutzer hat die Fähigkeit Rechenleistung, Datenspeicher Netzwerke und weitere fundamentale Computing Ressourcen bereitzustellen und beliebige Software darauf zu betreiben, dazu können Betriebssysteme und Anwendungen gehören. Diedarunterliegende Infrastruktur wird vom Anbieter betrieben, der Nutzer kann abereingeschränkte Kontrolle über bestimmte Komponenten haben, dazu gehören beispielsweiseFirewalls.

\textbf{Platform as a Service:} Der Nutzer verfügt über die Fähigkeit seine eingekaufte oderselbst erstellten Anwendungen auf der Cloud Infrastruktur zu betreiben, die notwendigeUmgebung die über Sprachen, Bibliotheken, Tools und Services verfügt wird vom Cloud Service Provider (CSP) bereitgestellt. Die darunter liegende Infrastruktur mit Netzwerken, Servern,Betriebssystemen und Speicher wird vom CSP betrieben, der Nutzer hat die Kontrolleüber Anwendung und Konfiguration der Umgebung in der die Anwendung betrieben wird.

\textbf{Software as a Service:} Dem Nutzer wird der Zugriff auf die vom CSP in derCloud Infrastruktur betriebenen Softwareanwendung gewährt. Auf diese wird mithilfeeines Thin oder Fat Client zugegriffen, dabei kümmert sich der Nutzer nicht um denBetrieb und die Konfiguration der darunterliegenden Cloud Infrastruktur (Netzwerke, Server, Betriebssystem, Speicher) und die Anwendung selbst mit Ausnahmeeingeschränkter Nutzereinstellungen.\\

In Art der Bereitstellung eines Cloud Services werden vier grundlegende Modelleunterschieden; es existieren Public, Private, Hybrid und Community Cloud Modelle.\\

\textbf{Private Cloud}: Die Cloud Infrastruktur wird ausschließlich für die Nutzung durch eine einzigeOrganisation mit mehreren Nutzern bereitgestellt. Besitz und Betrieb liegen dabeientweder bei der selben Organisation, einer Drittpartei oder einer Kombination beider, die Infrastruktur kann dabei On- oder Off-Premises\footnote{Hardware ist lokal vor Ort/nicht vor Ort} betrieben werden.

\textbf{Public Cloud}: Die Public Cloud steht für die Nutzung durch die allgemeine Öffentlichkeit bereit.Die Cloud Infrastruktur befindet sich im Besitz eines Unternehmens, Bildungseinrichtung,Regierungsorganisation oder einer Kombination aus diesen und wird auch von der selben Organisation On-Premises betrieben. 

\textbf{Community Cloud}: Eine Community Cloud wird von einer Gemeinschaft von Nutzern mit gemeinsamenAnliegen eingesetzt. Der Besitz und Betrieb liegen dabei bei einem oder mehrerenMitgliedern dieser Gemeinschaft, einer Drittpartei und kann Off- oder On-Premises betrieben
werden.

\textbf{Hybrid Cloud}: Die Hybrid Cloud besteht aus einer Kombination der beschriebenen Modelle (Public, Private und Community). Diese bilden dabei eigene Instanzen die aber durch standardisierte oder proprietäre Schnittstellen den Transfer von Daten und Anwendungenzwischen den Instanzen erlauben.

\subsection{Vor- und Nachteile des Einsatzes von Cloud Computing}

\subsubsection{Vorteile und Treiber der Adoption von Cloud Computing}

\textbf{Wirtschaftliche Vorteile}: Ein Vorteil in der Nutzung von Cloud Computingkann darin liegen dass ein Großteil der für den Betrieb notwendigen Infrastrukturnicht mehr vom Unternehmen selbst eingekauft, eingerichtet und betrieben werdenmuss (Abb. 2.1). Potentiell hohe Kosten die bereits vor derInbetriebnahme eines Systems mit einem höheren Risiko aufgewendet werden müssenstellen in Form von individuell geringeren laufenden Beträgen ein deutlichreduziertes Risiko dar\cite{capex-opex}.\\
Sofern der Einsatz von Cloud Computing in einer sinnvollen und korrektenWeise erfolgt können je nach Fall die Gesamtkosten um einen hohen Anteil reduziertwerden\cite{total-cost}.\\
Die Gesamtkostenersparnisse stehen auch im Zusammenhang mit Skaleneffekten\footnote{Zusammenhang zwischen produziertem Ertrag und eingesetzter Ressourcen} die fürgroße Cloud Service Provider gelten. Der Betrieb eines einzelnen Servers ist im Verhältnismit bedeutend höheren Kosten verbunden als das hinzufügen eines äquivalentenSystems zu einem Rechenzentrum im Betrieb von Mircosoft oder einem vergleichbarenAnbieter\cite{econ-scale}.

\textbf{Skalierbarkeit}: Besonders für schnell wachsende Unternehmen ist dieMöglichkeit schneller Skalierbarkeit einer der prominentesten Vorteile der Cloud.Es kann nicht nur auf vorhersagbare Anstiege (zum Beispiel ausgelöst durcheine Verkaufsaktion) sondern auch auf unvorhersehbare Ereignisse reagiert werden.Zusätzlich ist es möglich diese Skalierung nicht nur bis zu einem bestimmten Limit,sondern nahezu unendlich zu betreiben. Wichtig ist auch dass sowohl auf steigendeals auch sinkende Nachfrage reagiert werden kann\cite{scale}.

\textbf{Resilienz}: In einem Worst Case-Szenario kann ein ganzes Rechenzentrumdurch unvorhergesehen Ereignisse wie beispielsweise Brände, Naturkatastrophenoder anderes vollständig zerstört werden. Selbst wenn Backup-Rechenzentrenverfügbar sind ist eine Übertragung der Operationen kein trivialer Ablauf undbirgt oft nicht außer Acht zu lassende Risiken. Die Flexibilität der Clouderlaubt es die gesamte Infrastruktur mit sehr geringem Aufwand in nichtbetroffene Regionen zu verlagern und die Kontinuität der Geschäftstätigkeitenmit minimaler Unterbrechung aufrecht zu erhalten\cite{resil}.

\textbf{Security}: Sicherheitsaspekte können sowohl einen Vor- als auch Nachteilvon Cloud Computing darstellen. Hier sollen zuerst Vorteile dargelegt werden,potentielle Probleme sind im nächsten Abschnitt beschrieben.\\
Die technischen Möglichkeiten und besonders auch die Wahrnehmung des ThemasSicherheit in der Cloud unterlagen und unterliegen auch noch immer einemdeutlichen Wandel. Cloud Anbieter investierenviele Ressourcen in Sicherheit und stellen dem Nutzer zum Beispiel bereits sicherimplementierte Verschlüsselungen zur Verfügung oder bieten einen gewissenSchutz vor Denial-of-Service Angriffen durch ihre \enquote{natürliche} Skalierbarkeit\cite{sec-1}.

\subsubsection{Herausforderungen und Risiken}

\textbf{Netzwerkabhängigkeit}: Da der Zugriff auf Cloud Dienste über dasInternet erfolgt entsteht dadurch entsprechend auch eine hohe Abhängigkeit. Stabile und schnelle Netzwerkanbindung ist eine kritische Voraussetzung für effektives Arbeiten\cite{net-dep}, bei lokal gehosteten Systemen ist diese Abhängigkeitentsprechend geringer.

\textbf{Vendor Lock-in}: Bei der Nutzung eines Cloud Anbieters entsteht dieGefahr sich zu sehr in Abhängigkeit eines einzelnen Anbieters zu begeben.Im Fall einer Änderung der Nutzungsbedingungen oder einer Änderung imKostenmodell die den eignen Interessen stark entgegen steht, besteht die Gefahrbereits so abhängig von diesem Anbieter zu sein dass die Kosten eines Wechselsderart hoch ausfallen dass man gezwungen ist die Bedingungen zu akzeptieren\cite{lock-in}.

\textbf{Security und Privacy}: Sicherheitsrisiken sind einer der meistgenanntenGründe die gegen Cloud Computing sprechen\cite{sec-2}, besonders im Fall der Nutzung einerPublic Cloud. Die Gefahr dass Daten in die Hände dritter gelangen kann zumbeispielsweise nicht vollständig ausgeschlossen werden. Da die Verantwortung überdie Sicherheit der Daten dem Cloud Anbieter unterliegt kann es auch zu Problemenhinsichtlich Privatheit der Daten kommen, sollte etwa eine RegierungsorganisationZugriff auf bestimmte Daten eines Nutzer verlangen könnte dieser ohne dessenEinverständnis gewährt werden.

\textbf{Kosten}: Auch wenn die Nutzung von Cloud Computing mit dem Vorteilgeringerer Kosten beworben wird, ist dies nicht zwingend garantiert. Werden dievorhandenen Systeme ungünstig verwendet, bleiben zum Beispiel viele gebuchteCPUs und IP-Adressen sowie weitere Ressourcen ungenutzt, können unnötig hohe Kosten entstehen. Auch während der Migrationsphase, in der möglicherweise beide Systeme parallel betrieben werden müssen, können höhere Kostenentstehen als in einem vergleichbaren Zeitraum davor. Nicht zuletzt stellt die Migration komplexer Systeme häufig eine große technische und dadurch auch finanzielle Herausforderung dar\cite{migration-cost}.

\subsection{Überblick über die wichtigsten Cloud Service Provider}

In diesem Abschnitt soll ein knapper Überblick über die wichtigsten Public Cloud Service Provider gegeben werden. Abbildung 2.2 stellt den Marktanteil der aktuell umsatz-stärksten Cloud Service Provider sowie das globale Umsatzwachstum insgesamt dar. Zu beachten ist dass in dieser Abbildung das Service Modell SaaS nicht beinhaltet ist.

\begin{figure}[H]
	\includegraphics[width=1.0\textwidth]{fig/aa-hauptteil/CSP-share.png}
	\caption{CSP Market Share Q2 2021 nach Umsatz\cite{csp-share}}
	\centering
\end{figure}

Aus Abb. 2.2 wir ersichtlich dass Amazon, Microsoft und Google gemeinsam mehr als die Hälfte des Marktes beherrschen, Amazon allein stellt etwa ein Drittel aller Infrastruktur Services bereit.

\begin{figure}[H]
	\includegraphics[width=0.75\textwidth]{fig/aa-hauptteil/Gartner.png}
	\centering
	\caption{CSP Gartner Magic Quadrant Juli 2021\cite{gartner-mag}}
	\centering
\end{figure}

Der Gartner Magic Quadrant für Cloud Service Provider bietet einen grobenÜberblick über den Umfang der Angebote (Completeness of Vision) unddie Ausgereiftheit einer Plattform (Ability to Execute). Deutlich erkennbarist hier die Vormachtstellung von Amazon gegenüber Microsoft und Google, auffällig ist auch die Stellung von IBM die auf ein mögliches Problem in der Ausgereiftheit der IBM Cloud hinweisen könnte.

\section{Infrastructure as Code}

Automatisierung spielt in der modernen Softwareentwicklung eine wichtige Rolle. Automatisierte Unit- und Integration-Tests gehören inzwischen schon lange zum Standardrepertoire eines Softwareentwicklers. Die Verbreitung der DevOps-Kultur förderte in den letzten Jahren auch die Automatisierung des Build- und Deployment-Prozesses und mit der steigenden Verbreitung Cloud-basierter Software erweitert sich diese Automatisierung nun auch auf das Provisioning der Infrastruktur.

Infrastructure as Code beschreibt im allgemeinen einen Ansatz zur Automatisierung des Infrastruktur-Provisionings basierend auf Methoden aus derSoftwareentwicklung\cite{def-iac}.

Statt eines manuellen Aufbaus und händischer Konfiguration der einzelnenKomponenten werden maschinenlesbare Dateien verfasst welche dann von einemIaC Tool eingelesen und verarbeitet werden. Dabei kommen bevorzugtdeklarative Sprachen zum Einsatz deren höhere Abstraktion mehr Flexibilitätals ein imperativer Ansatz erlaubt\cite{dec-imp-iac}.

\subsection{Technologischer Wandel und das Cloud Age Mindset}

Durch die Technologien der Cloud ist es heute möglich eine gewünschteIT-Infrastruktur sehr viel schneller bereitzustellen alszuvor. Statt Einkauf, Anschließen und Einrichten einesphysischen Servers das, je nach Szenario einen Zeitraum von mindestensmehreren Stunden oder Tagen bis hin zu Wochen dauern kann, könnenvirtuelle Ressourcen in der Cloud in wenigen Minuten verfügbar gemacht werden.Der schnellere Ablauf wird durch die Automatisierung von Prozessen wie der Bereitstellung der Infrastruktur mithilfe von IaC Tools noch verstärkt. Mit diesen Veränderungen wird das Management und die Erweiterung derbestehenden Systeme jedoch nicht unbedingt einfacher\cite{iac-schneller}, die Anwendung vonArbeitsprozesse die sich bisher bewährt haben sind oftmals ineffektiv und verhindern das Ausnutzen des vollen Potentials der Cloud.Kief Morris, Autor von \textit{Infrastructure as Code - Dynamic Systems for the Cloud Age}, stellt die fundamentalen Unterschiede des Arbeitens mitCloud-Technologien mithilfe der folgenden Tabelle (Tab. 2.1) dar.

\begin{table}[H]
	\includegraphics[width=0.9\textwidth]{fig/aa-hauptteil/iron_vs_cloud.png}
	\centering
	\caption{\enquote{Iron vs Cloud Age}\cite{dec-imp-iac}}
	\centering	
\end{table}

Veränderungen im \enquote{Iron Age} sind aufwändig und teuer und stellen einRisiko dar, es wird versucht diese Risikopunkte zu reduzieren, daher werdenviele Veränderung gebündelt getestet und eingeführt wodurch langeRelease-Zyklen entstehen. Die Architekturen die dadurch befördert werdensind monolytisch, die Konfiguration erfolgt eher mithilfe von GUI-gesteuerten Programmen oder direkter physischer Interaktion, zum Beispiel wenn ein neuer Serverin ein Netzwerk eingebunden wird. Veränderungen in der Cloud stellenfast genau das Gegenteil dar, daher wird erkennbar dass eine auf das \enquote{Iron Age} zugeschnittene Arbeitsweise für die Cloud nicht effektiv ist.Ein neues \enquote{Cloud Age Mindset} das die rechte Spalte der Tabelleverinnerlicht ist erforderlich um die Vorteile der Cloudwirklich effektiv und in vollem Umfang nutzen zu können.

\subsection{Vorteile von Infrastructure as Code im Vergleich zu manuellem Infrastruktur-Provisioning}

\textbf{Kein Configuration Drift durch einheitliche Codebase}: Configuration Drift bezeichnet eine über die Zeitwachsende Abweichung zweier ursprünglich identischer Systeme. Wird eingleiches System, zum Beispiel ein Applikationsserver, in verschiedenenUmgebungen eingesetzt stellen diese Umgebungen oftmals auch leicht verschiedeneAnforderungen an diesen Server. Auf diese kann dann mit Optimierungen, etwa in Form spezifischerKonfigurationsdetails, reagiert werden. Wird nun das ursprünglicheBasis-System geupdated werden individuelle und oft undokumentierte Anpassungennicht berücksichtigt wodurch ein Update unbequeme Konsequenzen nachsich ziehen kann. Werden alle Veränderungen in einer einheitlichenCodebase verwaltet und Updates häufig vorgenommen verhindert manstarken Configuration Drift der ansonsten oftmals stattfindet\cite{conf-drift}.

\textbf{Wiederverwendbarkeit durch einheitlichen Code}:Ein weiterer Vorteil der durch die Verwendung einer einheitlichenCodebase entsteht ist die Wiederverwendbarkeit und Reproduzierbarkeiteines Systems. Wenn ein identisches System an einer anderen Stelleaufgebaut werden soll oder geht ein System aus unvorhergesehenenGründen in seiner Gesamtheit verloren kann es schnell und mitverhältnismäßig geringem Aufwand reproduziert werden.Ein dazu passender Ausdruck in Bezug auf Server ist \enquote{Cattle not Pets}. Statt sich individuell und mit großem Aufwand um einzelne Server zukümmern, wie man es etwa mit dem eigenen Haustier tut, sollten Serverwie leicht ersetzbares Vieh behandelt werden\cite{cattle-pets}.

\textbf{Schnelleres Provisioning durch Cloud}: Ein bereits häufig
angesprochener Vorteil ist die schnelle Bereitstellung, auf tiefere
Erklärung kann daher hier verzichtet werden.

\textbf{Schnellerer Profit}: Schnellere Bereitstellung der Hardware
und schnellere Auslieferung von Software die durch DevOps Methoden
begünstigt werden erzeugen entsprechend auch schneller einen Mehrwert.

\textbf{Einheitliches Tooling in Dev, Ops und weiteren Beteiligten Teams}:
Verwendung von IaC
fördert die einheitlicheres Tooling in allen Bereichen die mit einem
Softwareprodukt in Zusammenhang stehen. Cloud Technologien fördern und
ermöglichen diese Vereinheitlichung, manuelles Provisioning ohne ein
Cloud Modell erschwert dies oder macht es sogar unmöglich.

\textbf{Stärkere Automatisierung im Arbeitsablauf}: Automatisierung
bedeutet immer einen gewissen upfront Overhead, jedoch kann auf
längere Sicht deutlich von automatisierten Abläufen profitiert weren.
Ein Beispiel hierfür sind automatisierte und in eine CI/CD Pipeline
integrierte Tests.

\textbf{Höhere Zuverlässigkeit und Sicherheit durch schnelle Updates}:
Von eine Struktur die schnelle und häufige Veränderungen fördert
kann auch die Sicherheit und Zuverlässigkeit eines Systems profitieren.
Auf Sicherheitsrisiken kann in kurzer Zeit und ohne viel Aufwand
reagiert werden, eine unsichere Funktion kann etwa schnell durch
eine sichere Variante ausgetauscht werden, mögliche damit verbundene
Probleme können dann in automatisierten Tests erkannt werden wodurch
das System zuverlässig bleibt.

\textbf{Schnellere Fehlersuche und -behebung}:

Fehler die dennoch auftreten können dann durch den Einsatz kleinerer
Komponenten schneller isoliert, gefunden und behoben werden.
Monolithische Systeme erschweren dies durch dadurch dass weniger klar
isolierte Komponenten vorhanden sind die häufig mehr Abhängigkeiten
aufweisen und daher schwerer als einzelne Einheit getestet werden können.


\subsection{Herausforderungen im Einsatz von Infrastructure as Code}

\subsection{Die drei Kernverfahren von Infrastructure as Code}

\section{Funktionsprinzip und Rolle von Terraform im IaC-Anwendungsprozess}

\subsection{Funktionsweise von Terraform}

\subsection{Einführung in die Hashicorp Configuration Language}




\chapter{Evaluierungsanforderungen und Umsetzung}
\label{sec:ergeb}

\section{Evaluierungsanforderungen}

\subsection{Ziel der Evaluierung}

\subsection{Untersuchte Komponenten der Terraform Provider}

\subsection{Auswahl der Evaluierungskriterien}




\section{Umsetzung des Testsystems}

\subsection{Eingesetzte Software und Tools}

\subsection{High-Level Aufbau des Testsystems}

\subsection{Konkreter Aufbau auf Google Cloud Platform}

\subsection{Konkreter Aufbau auf Azure}

\subsection{Aufbau der ergänzenden Versuche}




\chapter{Ergebnisse und Bewertung}

\section{Evaluierung der Functional Completeness}

\section{Ergebnisse und Bewertung der Time Behaviour Tests}

\section{Ergebnisse und Bewertung der Recoverability Tests}

\section{Ergebnisse und Bewertung der Modifiability Tests}

\section{Evaluierung der Einheitlichkeit der Testsysteme für Azure und Google Cloud Platform}




